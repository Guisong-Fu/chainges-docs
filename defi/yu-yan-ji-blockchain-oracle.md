# 预言机 BlockChain Oracle

知乎上的一篇回答： 

{% embed url="https://zhuanlan.zhihu.com/p/52369816" %}



**区块链外信息写入区块链内的机制，一般被称为预言机 \(oracle mechanism\) 。**

Q：还没理解，那DAML的那种json api和这个有什么区别？DAML不是也能靠json api往链上写入东西吗？所以预言机和JSON API的区别是什么？

Q：预言机是专门用来写入以太坊的？

> 区块链只能访问区块链本身的数据，闭环地解决系统内信任问题。一旦涉及到获取链下数据，其功能就会受限。主要原因是，智能合约不管何时何地运行，都必须保持结果一致，因此虚拟机不能让智能合约进行网络调用，否则结果就是不确定的。
>
> 如何将区块链和互联网世界连接起来？预言机可以扮演连接器的角色。作为一个可信任的中间件，预言机能将互联网世界的数据输入到区块链上，为智能合约提供与互联网世界的连接性。

Q: 

> 因此虚拟机不能让智能合约进行网络调用，否则结果就是不确定的。 -&gt; 为什么？

{% embed url="https://mp.weixin.qq.com/s/5ZYKv0BBX1j18H6AAePZaQ" %}

> 涉及到将链下数据上传到区块链上的各种应用场景，都可以考虑使用Truora。潜在场景列举如下：
>
> **场景1：快递**
>
> **场景**：用户通过某电商平台下单购买衣服，购买成功后，用户将资金存入智能合约。正常情况下，用户签收快递后，用自己的私钥签名并将签名信息上链，智能合约会自动将钱转给商家。
>
> 但如果快递中途丢失，用户如何申请赔付呢？
>
> **解决思路**：可以通过 Truora 将快递状态信息传递到链上智能合约，如用户超过一定时间未收到快递，则用户发起赔付流程，智能合约根据预言机获取的快递状态判断是否将资金返还用户。
>
> **场景二：公正摇号**
>
> **场景**：部分城市在购房过程中，采取摇号方式以保证公平性，其公开透明和公平性成为很多人关注的焦点。然而，购房者对摇号过程知之甚少，只能默默等待摇号结果。
>
> 封闭状态的链上无法产生安全的随机数，如何在链上产生安全的随机数以实现摇号公平？
>
> **解决思路**：地产公司可以部署一个摇号智能合约，链下核实客户购房资格后，将有购房资格的客户身份标识上链，通过Truora从公证处网站或随机数网站获取随机数，或使用Truora的VRF（可验证随机数）功能产生随机数。随机数产生后，智能合约根据事先编好的摇号逻辑决定中签者，购房者则可以在链上全流程查看摇号信息。
>
> **场景三：慈善公益**
>
> **场景**：利用区块链技术的不可篡改性和可追溯性，可以解决慈善中的资金流向问题，比如追溯善款去向。同时，利用智能合约可有效解决传统慈善公益项目中流程复杂的问题。我们希望智能合约能对符合条件的申请者进行善款自动划拨。
>
> 为保证申请者信息的真实性，慈善机构除了在链下简单验证申请者的信息之外，还需要通过智能合约验证申请者的个人相关信息，如病例信息、房产信息、工作信息等。如何让智能合约自动校验这些信息呢？
>
> **解决思路**：指定查询申请者个人信息相关的链下网站，通过Truora将申请者个人信息上链，智能合约根据这些信息判断申请者是否有资格申请、是否符合善款自动划拨条件，如核验通过后则向申请者发起自动转账，不通过则将申请者记录至黑名单。

